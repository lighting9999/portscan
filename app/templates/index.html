<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>端口扫描工具</title><link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}"></head><body><div class="container"><h1>端口扫描工具</h1><form id="scanForm" method="POST" action="/scan"><label for="ip">IP地址：</label><input type="text" id="ip" name="ip" required><br><label for="start_port">开始端口：</label><input type="number" id="start_port" name="start_port" required><br><label for="end_port">结束端口：</label><input type="number" id="end_port" name="end_port" required><br><button type="submit">开始扫描</button></form><div id="result"></div><div id="progress-container"><div id="progress-bar"></div></div></div>// 监听表单提交事件 document.getElementById('scanForm').addEventListener('submit', function (event) { event.preventDefault(); const ip = document.getElementById('ip').value; const start_port = document.getElementById('start_port').value; const end_port = document.getElementById('end_port').value; // 显示进度条 document.getElementById('progress-container').style.display = 'block'; fetch('/scan', { method: 'POST', body: new URLSearchParams({ ip: ip, start_port: start_port, end_port: end_port }), headers: { 'Content-Type': 'application/x-www-form-urlencoded' } }) .then(response =&gt; response.json()) .then(data =&gt; { let result = `<h2>扫描结果：</h2><ul>`; data.results.forEach(resultLine =&gt; { result += `<li>${resultLine}</li>`; }); result += `</ul>`; document.getElementById('result').innerHTML = result; // 更新进度条 let progress = (data.progress / (end_port - start_port + 1)) * 100; document.getElementById('progress-bar').style.width = progress + '%'; }) .catch(error =&gt;{ console.error('Error:', error); alert('扫描失败，请重试！'); }); });</body></html>
